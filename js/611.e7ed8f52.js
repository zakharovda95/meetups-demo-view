"use strict";(self["webpackChunkvuejs_option_api_20220404_pet_project_meetups_spa"]=self["webpackChunkvuejs_option_api_20220404_pet_project_meetups_spa"]||[]).push([[611],{3054:function(e,t,n){n.d(t,{YT:function(){return s},fs:function(){return u},mD:function(){return o}});var a=n(7699),r=n(4944);function o(e,t){return(0,a.Xb)(r.bU,e,t).then((e=>e.user)).catch((e=>e.code+e.message))}function s(e,t){return(0,a.e5)(r.bU,e,t).then((e=>e.user)).catch((e=>e.code))}async function u(){await(0,a.w7)(r.bU)}},3982:function(e,t,n){function a(e){if(!e)return"Обязательное поле";const t=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;return!!t.test(e)||"Не забывайте про @"}function r(e){return!!e||"Обязательное поле"}function o(e){return e?!(e.length<6)||"Минимум 6 символов":"Обязательное поле"}function s(e,t){return e?e===t||"Пароли не совпадают":"Обязательное поле"}n.d(t,{_D:function(){return r},oH:function(){return a},u_:function(){return s},uo:function(){return o}})},9631:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(3396),r=n(7139);const o={class:"ui-label"},s={key:0};function u(e,t,n,u,i,l){return(0,a.wg)(),(0,a.iD)("div",o,[n.label?((0,a.wg)(),(0,a.iD)("label",s,(0,r.zw)(n.label),1)):(0,a.kq)("",!0),(0,a.WI)(e.$slots,"default",{},void 0,!0)])}var i={name:"UiLabel",props:{label:{type:String,require:!1}}},l=n(89);const d=(0,l.Z)(i,[["render",u],["__scopeId","data-v-5c8591b8"]]);var c=d},5632:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var a=n(3396);const r={class:"login-page"};function o(e,t,n,o,s,u){const i=(0,a.up)("LoginForm");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(i)])}const s=e=>((0,a.dD)("data-v-d87f65d4"),e=e(),(0,a.Cn)(),e),u={class:"login-form mdl-shadow--2dp"},i=s((()=>(0,a._)("h3",null,"Войдите",-1))),l=(0,a.Uk)(" Войти "),d=(0,a.Uk)(" Нет аккаунта? "),c=(0,a.Uk)(" Зарегистрируйтесь ");function m(e,t,n,r,o,s){const m=(0,a.up)("UiInput"),p=(0,a.up)("ErrorMessage"),f=(0,a.up)("UiLabel"),_=(0,a.up)("UiButton"),w=(0,a.up)("UiLink"),g=(0,a.up)("Form");return(0,a.wg)(),(0,a.iD)("div",u,[i,(0,a.Wm)(g,{onSubmit:s.login},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"login-field",label:"Email"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"email",rules:s.validateEmail,type:"email",modelValue:e.userData.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.userData.email=t)},null,8,["rules","modelValue"]),(0,a.Wm)(p,{name:"email",class:"error"})])),_:1}),(0,a.Wm)(f,{label:"Пароль"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"password",rules:s.validatePassword,type:"password",modelValue:e.userData.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.userData.password=t)},null,8,["rules","modelValue"]),(0,a.Wm)(p,{name:"password",class:"error"})])),_:1}),(0,a.Wm)(_,{class:"login-button",type:"submit",variant:"bgMain"},{default:(0,a.w5)((()=>[l])),_:1}),(0,a._)("p",null,[d,(0,a.Wm)(w,{class:"registration-link",to:{name:"registration"}},{default:(0,a.w5)((()=>[c])),_:1})])])),_:1},8,["onSubmit"])])}var p=n(9631),f=n(1085),_=n(797),w=n(9187),g=n(3054),h=n(5708),v=n(3982),b=n(2070),U={name:"LoginForm",components:{UiButton:w.Z,UiInput:f.Z,UiLink:_.Z,UiLabel:p.Z,Form:h.l0,ErrorMessage:h.Bc},mounted(){this.$toast.show("Вы можете зайти под демо пользователем")},data:()=>({userData:{email:"testUser@mail.com",password:"123456"}}),methods:{validateEmail(e){return(0,v.oH)(e)},validatePassword(e){return(0,v.uo)(e)},async login(){const e=await(0,g.YT)(this.userData.email,this.userData.password);"auth/user-not-found"===e&&this.$toast.error("Неверный логин/пароль"),"auth/wrong-password"===e?this.$toast.error("Неверный пароль"):((0,b.qy)("user_token",e.uid),await this.$store.dispatch("isUserAuthorized"),await this.$router.push({name:"meetups"}))}}},D=n(89);const k=(0,D.Z)(U,[["render",m],["__scopeId","data-v-d87f65d4"]]);var W=k,Z={name:"LoginPage",components:{LoginForm:W}};const L=(0,D.Z)(Z,[["render",o],["__scopeId","data-v-1223c822"]]);var y=L}}]);
//# sourceMappingURL=611.e7ed8f52.js.map