"use strict";(self["webpackChunkvuejs_option_api_20220404_pet_project_meetups_spa"]=self["webpackChunkvuejs_option_api_20220404_pet_project_meetups_spa"]||[]).push([[201],{2773:function(e,a,t){t.d(a,{U:function(){return l}});const l="https://firebasestorage.googleapis.com/v0/b/meetups-ddc9b.appspot.com/o/covers%2Fmeetups_card__background.jpg?alt=media&token=744441d9-c81e-4332-82a5-f41e5cc96b58"},2395:function(e,a,t){t.d(a,{F_:function(){return d},LZ:function(){return l},Qv:function(){return n}});const l=[{value:"registration",name:"Регистрация"},{value:"opening",name:"Открытие"},{value:"break",name:"Перерыв"},{value:"coffee",name:"Coffee Break"},{value:"closing",name:"Закрытие"},{value:"afterparty",name:"Afterparty"},{value:"talk",name:"Доклад"},{value:"other",name:"Другое"}],n=[{value:"EN",name:"EN"},{value:"RU",name:"RU"}],d={registration:"clipboard",opening:"clock",talk:"dialog",break:"bell",coffee:"cup",closing:"close",afterparty:"moon",other:"list"}},4563:function(e,a,t){t.d(a,{Z:function(){return c}});var l=t(3396),n=t(7139);const d={class:"image-uploader"},o={class:"text"},i=["disabled"];function r(e,a,t,r,u,s){return(0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("label",{class:(0,n.C_)(["preview",s.uploaderClass]),style:(0,n.j5)({"background-image":s.bgImage})},[(0,l._)("span",o,(0,n.zw)(s.text),1),(0,l._)("input",{type:"file",ref:"input",accept:"image/*",class:"input",disabled:t.loading,onChange:a[0]||(a[0]=(...e)=>s.selectImage&&s.selectImage(...e)),onClick:a[1]||(a[1]=(...e)=>s.removeImg&&s.removeImg(...e))},null,40,i)],6)])}var u=t(2773),s={name:"UiImageUploader",emits:["select","error","remove"],props:{preview:String,loading:Boolean},inheritAttrs:!1,data:()=>({url:null}),mounted(){this.preview&&(this.url=this.preview)},methods:{selectImage(){const e=this.$refs.input.files[0];this.url=URL.createObjectURL(e),this.$emit("select",e),this.$toast.success("Картинка загружена!")},async removeImg(e){this.url&&(e.preventDefault(),this.$emit("remove"),this.url=void 0,this.$toast.success("Картинка удалена!")),this.$emit("remove"),this.$refs.input.value=null}},computed:{uploaderClass(){return{loading:this.loading}},bgImage(){return this.url?`linear-gradient(0deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${this.url})`:`linear-gradient( 0deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${u.U})`},text(){return this.url||this.loading?this.loading?"Загрузка...":this.url&&!this.loading?"Удалить изображение":"":"Загрузить изображение"}},beforeUnmount(){this.url=null,this.$refs.input.value=null}},m=t(89);const p=(0,m.Z)(s,[["render",r],["__scopeId","data-v-7b85e468"]]);var c=p},6033:function(e,a,t){t.d(a,{Z:function(){return s}});var l=t(3396),n=t(7139);const d=["value"];function o(e,a,t,o,i,r){return(0,l.wg)(),(0,l.iD)("select",(0,l.dG)({class:"ui-dropdown"},e.$attrs,{onChange:a[0]||(a[0]=e=>r.modelValueProxy=e.target.value)}),[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.options,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e.value,key:e.name},(0,n.zw)(t.type)+": "+(0,n.zw)(e.name),9,d)))),128))],16)}var i={name:"UiDropdown",emits:["update:modelValue"],props:{options:{type:Array,required:!0,default:()=>[]},modelValue:String,type:String},computed:{modelValueProxy:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},r=t(89);const u=(0,r.Z)(i,[["render",o],["__scopeId","data-v-6d2cecee"]]);var s=u},6885:function(e,a,t){t.d(a,{Z:function(){return m}});var l=t(3396);const n=["type","value"];function d(e,a,t,d,o,i){return(0,l.wg)(),(0,l.iD)("input",{class:"ui-input-date",type:t.type,ref:"input",value:t.modelValue,onInput:a[0]||(a[0]=e=>i.modelValueProxy=e.target.value)},null,40,n)}var o=t(6797),i=t.n(o),r=(t(1607),{name:"UiInputDate",props:{type:{type:String,default:"date"},modelValue:{type:String}},computed:{modelValueProxy:{get(){return this.modelValue?"date"===this.type?i()(this.modelValue).utc().format("YYYY-MM-DD"):"time"===this.type?i().utc(this.modelValue).utc().format("HH:mm"):"datetime-local"===this.type&&i().utc(this.modelValue).utc().format("YYYY-MM-DDTHH:mm"):""},set(e){this.$emit("update:modelValue",e)}}}}),u=t(89);const s=(0,u.Z)(r,[["render",d],["__scopeId","data-v-1df420f0"]]);var m=s},3886:function(e,a,t){t.d(a,{Z:function(){return m}});var l=t(3396),n=t(7139);const d={class:"ui-label"},o={key:0};function i(e,a,t,i,r,u){return(0,l.wg)(),(0,l.iD)("div",d,[t.label?((0,l.wg)(),(0,l.iD)("label",o,(0,n.zw)(t.label),1)):(0,l.kq)("",!0),(0,l.WI)(e.$slots,"default",{},void 0,!0)])}var r={name:"UiLabel",props:{label:{type:String,require:!1}}},u=t(89);const s=(0,u.Z)(r,[["render",i],["__scopeId","data-v-43692e97"]]);var m=s},5949:function(e,a,t){t.r(a),t.d(a,{default:function(){return J}});var l=t(3396);const n={class:"create-page"};function d(e,a,t,d,o,i){const r=(0,l.up)("CreateView");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(r)])}const o=e=>((0,l.dD)("data-v-2216eea4"),e=e(),(0,l.Cn)(),e),i={class:"create-view mdl-shadow--4dp"},r=o((()=>(0,l._)("h3",null,"Создайте митап",-1))),u={class:"uploader"},s={class:"forms"},m={class:"agenda"},p=o((()=>(0,l._)("h3",null,"Программа",-1))),c={class:"add-button"},g=(0,l.Uk)(" + Добавить пункт программы "),v={class:"creation-buttons"},h=(0,l.Uk)(" Создать "),f=(0,l.Uk)(" Отменить ");function b(e,a,t,n,d,o){const b=(0,l.up)("UiImageUploader"),I=(0,l.up)("CreateForm"),_=(0,l.up)("CreateAgendaItemForm"),w=(0,l.up)("UiButton");return(0,l.wg)(),(0,l.iD)("div",i,[r,(0,l._)("div",u,[(0,l.Wm)(b,{class:"uploader",loading:e.isLoading,onSelect:o.selectImage,onRemove:o.removeImage},null,8,["loading","onSelect","onRemove"])]),(0,l._)("div",s,[(0,l.Wm)(I,{class:"forms-item",loading:e.isLoading},null,8,["loading"])]),(0,l._)("div",m,[p,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.meetupForm.agenda,(a=>((0,l.wg)(),(0,l.j4)(_,{key:a.id,loading:e.isLoading,class:"agenda-item","agenda-id":a.id},null,8,["loading","agenda-id"])))),128)),(0,l._)("div",c,[(0,l.Wm)(w,{disabled:e.isLoading,variant:"default",onClick:e.addAgendaItem},{default:(0,l.w5)((()=>[g])),_:1},8,["disabled","onClick"])])]),(0,l._)("div",v,[(0,l.Wm)(w,{disabled:e.isLoading,variant:"bgWrong",onClick:o.createMeetup},{default:(0,l.w5)((()=>[h])),_:1},8,["disabled","onClick"]),(0,l.Wm)(w,{disabled:e.isLoading,variant:"bgMain",onClick:o.cancel},{default:(0,l.w5)((()=>[f])),_:1},8,["disabled","onClick"])])])}var I=t(4563);const _={class:"creation-form"};function w(e,a,t,n,d,o){const i=(0,l.up)("UiInput"),r=(0,l.up)("UiLabel"),u=(0,l.up)("UiInputDate");return(0,l.wg)(),(0,l.iD)("div",_,[(0,l.Wm)(r,{label:"Заголовок"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"title","model-value":o.meetupForm.title,"onUpdate:modelValue":e.updateTitle},null,8,["model-value","onUpdate:modelValue"])])),_:1}),(0,l.Wm)(r,{label:"Дата мероприятия"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{"model-value":o.meetupForm.date,"onUpdate:modelValue":e.updateDate},null,8,["model-value","onUpdate:modelValue"])])),_:1}),(0,l.Wm)(r,{label:"Место проведения"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"place","model-value":o.meetupForm.place,"onUpdate:modelValue":e.updatePlace},null,8,["model-value","onUpdate:modelValue"])])),_:1}),(0,l.Wm)(r,{label:"Описание"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{multiline:"",name:"description","model-value":o.meetupForm.description,"onUpdate:modelValue":e.updateDescription},null,8,["model-value","onUpdate:modelValue"])])),_:1})])}var U=t(1607),y=t(3886),A=t(6885),k=t(65),D={name:"CreateForm",components:{UiLabel:y.Z,UiInput:U.Z,UiInputDate:A.Z},props:{loading:{type:Boolean,default:!1}},computed:{meetupForm(){return this.$store.state.creating.meetupForm}},methods:{...(0,k.nv)(["updateTitle","updateDate","updatePlace","updateDescription"])}},V=t(89);const W=(0,V.Z)(D,[["render",w],["__scopeId","data-v-4d2447e0"]]);var C=W,$=t(3067);const Z={class:"agenda-item-form mdl-shadow--4dp"},F={class:"row-1"},L={class:"row-2"},S={class:"row-3"},M={key:0,class:"talk-group"},T={class:"row-4"},Y={class:"row-5"},j={key:1,class:"row-6"};function P(e,a,t,n,d,o){const i=(0,l.up)("UiDropdown"),r=(0,l.up)("UiIcon"),u=(0,l.up)("UiInputDate"),s=(0,l.up)("ErrorMessage"),m=(0,l.up)("UiLabel"),p=(0,l.up)("UiInput");return(0,l.wg)(),(0,l.iD)("div",Z,[(0,l._)("div",F,[(0,l.Wm)(i,{options:e.options,type:"Тип",disabled:t.loading,"model-value":o.currentAgendaItem.type,"onUpdate:modelValue":a[0]||(a[0]=a=>e.updateAgendaType([a,t.agendaId]))},null,8,["options","disabled","model-value"]),(0,l.Wm)(r,{onClick:a[1]||(a[1]=a=>e.removeAgendaItem(t.agendaId)),class:"trash","icon-name":"trash"})]),(0,l._)("div",L,[(0,l.Wm)(m,{class:"startsAt",label:"Начало"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"time",disabled:t.loading,"model-value":o.currentAgendaItem.startsAt,"onUpdate:modelValue":a[2]||(a[2]=a=>e.updateAgendaStartsAt([a,t.agendaId]))},null,8,["disabled","model-value"]),(0,l.Wm)(s,{name:"start"})])),_:1}),(0,l.Wm)(m,{class:"endsAt",label:"Окончание"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"time",disabled:t.loading,"model-value":o.currentAgendaItem.endsAt,"onUpdate:modelValue":a[3]||(a[3]=a=>e.updateAgendaEndsAt([a,t.agendaId]))},null,8,["disabled","model-value"])])),_:1})]),(0,l._)("div",S,[(0,l.Wm)(m,{label:o.labelType},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"title",disabled:t.loading,"model-value":o.currentAgendaItem.title,"onUpdate:modelValue":a[4]||(a[4]=a=>e.updateAgendaTitle([a,t.agendaId]))},null,8,["disabled","model-value"])])),_:1},8,["label"])]),"talk"===o.currentAgendaItem.type?((0,l.wg)(),(0,l.iD)("div",M,[(0,l._)("div",T,[(0,l.Wm)(m,{label:"Докладчик"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"speaker",disabled:t.loading,"model-value":o.currentAgendaItem.speaker,"onUpdate:modelValue":a[5]||(a[5]=a=>e.updateAgendaSpeaker([a,t.agendaId]))},null,8,["disabled","model-value"])])),_:1})]),(0,l._)("div",Y,[(0,l.Wm)(i,{options:e.langOptions,type:"Язык",disabled:t.loading,"model-value":o.currentAgendaItem.language,"onUpdate:modelValue":a[6]||(a[6]=a=>e.updateAgendaLanguage([a,t.agendaId]))},null,8,["options","disabled","model-value"])])])):(0,l.kq)("",!0),o.agendaType?((0,l.wg)(),(0,l.iD)("div",j,[(0,l.Wm)(m,{label:"Описание"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"description",multiline:"",disabled:t.loading,"model-value":o.currentAgendaItem.description,"onUpdate:modelValue":a[7]||(a[7]=a=>e.updateAgendaDescription([a,t.agendaId]))},null,8,["disabled","model-value"])])),_:1})])):(0,l.kq)("",!0)])}var q=t(5367),x=t(2395),z=t(6033),B={name:"CreateAgendaItemForm",components:{UiDropdown:z.Z,UiIcon:q.Z,UiInputDate:A.Z,UiLabel:y.Z,UiInput:U.Z},inheritAttrs:!1,props:{agendaId:{type:String,required:!0,validator:e=>""!==e},loading:{type:Boolean,default:!1}},data:()=>({options:x.LZ,langOptions:x.Qv}),methods:{...(0,k.nv)(["updateAgendaType","updateAgendaStartsAt","updateAgendaEndsAt","updateAgendaTitle","updateAgendaSpeaker","updateAgendaLanguage","updateAgendaDescription","removeAgendaItem"])},computed:{agenda(){return this.$store.state.creating.meetupForm.agenda},currentAgendaItem(){let e=null;return this.agenda.forEach((a=>{this.agendaId===a.id&&(e=a)})),e},labelType(){return"talk"===this.currentAgendaItem.type||"other"===this.currentAgendaItem.type?"Тема":"Нестандартный текст (необязательно)"},agendaType(){return"talk"===this.currentAgendaItem.type||"other"===this.currentAgendaItem.type}}};const E=(0,V.Z)(B,[["render",P],["__scopeId","data-v-3db87717"]]);var H=E,R=t(7491),O={name:"CreateView",components:{CreateAgendaItemForm:H,UiImageUploader:I.Z,UiButton:$.Z,CreateForm:C},data:()=>({file:null,isLoading:!1}),computed:{meetupForm(){return this.$store.state.creating.meetupForm}},methods:{...(0,k.nv)(["addAgendaItem","uploadImage","resetMeetupForm"]),selectImage(e){this.file=e},async uploadImg(){try{const e=await(0,R.Gq)("/covers/",this.file),a=e.metadata.fullPath,t=await(0,R.ii)(a);this.uploadImage({url:t,file:this.file})}catch(e){this.$toast.error("Ошибка"+e)}},removeImage(){this.file=null},cancel(){this.file=null,this.$router.push({name:"meetups"}),this.$toast.error("Создание митапа отменено"),this.resetMeetupForm()},async createMeetup(){this.isLoading=!0,this.file&&await this.uploadImg(),await this.$store.dispatch("createMeetup"),await this.$router.push({name:"meetup",params:{meetupId:this.meetupForm.id}}),this.resetMeetupForm(),await this.$toast.success("Митап создан!"),this.isLoading=!1}},beforeUnmount(){this.file=null}};const G=(0,V.Z)(O,[["render",b],["__scopeId","data-v-2216eea4"]]);var K=G,N={name:"CreatePage",components:{CreateView:K},computed:{isUserAuthorized(){return this.$store.state.user.data.isUserAuthorized}},methods:{guard(){this.isUserAuthorized||this.$router.replace({name:"meetups"})}},created(){this.guard()}};const Q=(0,V.Z)(N,[["render",d],["__scopeId","data-v-cc9a7ff0"]]);var J=Q}}]);
//# sourceMappingURL=201.48935727.js.map