"use strict";(self["webpackChunkvuejs_option_api_20220404_pet_project_meetups_spa"]=self["webpackChunkvuejs_option_api_20220404_pet_project_meetups_spa"]||[]).push([[632],{2773:function(e,t,a){a.d(t,{U:function(){return l}});const l="https://firebasestorage.googleapis.com/v0/b/meetups-ddc9b.appspot.com/o/covers%2Fmeetups_card__background.jpg?alt=media&token=744441d9-c81e-4332-82a5-f41e5cc96b58"},1873:function(e,t,a){a.d(t,{Z:function(){return c}});var l=a(3396),d=a(7139);const n={class:"image-uploader"},i={class:"text"},o=["disabled"];function r(e,t,a,r,s,u){return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("label",{class:(0,d.C_)(["preview",u.uploaderClass]),style:(0,d.j5)({"background-image":u.bgImage})},[(0,l._)("span",i,(0,d.zw)(u.text),1),(0,l._)("input",{type:"file",ref:"input",accept:"image/*",class:"input",disabled:a.loading,onChange:t[0]||(t[0]=(...e)=>u.selectImage&&u.selectImage(...e)),onClick:t[1]||(t[1]=(...e)=>u.removeImg&&u.removeImg(...e))},null,40,o)],6)])}var s=a(2773),u={name:"UiImageUploader",emits:["select","error","remove"],props:{preview:String,loading:Boolean},inheritAttrs:!1,data:()=>({url:null}),mounted(){this.preview&&(this.url=this.preview)},methods:{selectImage(){const e=this.$refs.input.files[0];this.url=URL.createObjectURL(e),this.$emit("select",e),this.$toast.success("Картинка загружена!")},async removeImg(e){this.url&&(e.preventDefault(),this.$emit("remove"),this.url=void 0,this.$toast.success("Картинка удалена!")),this.$emit("remove"),this.$refs.input.value=null}},computed:{uploaderClass(){return{loading:this.loading}},bgImage(){return this.url?`linear-gradient(0deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${this.url})`:`linear-gradient( 0deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${s.U})`},text(){return this.url||this.loading?this.loading?"Загрузка...":this.url&&!this.loading?"Удалить изображение":"":"Загрузить изображение"}},beforeUnmount(){this.url=null,this.$refs.input.value=null}},m=a(89);const p=(0,m.Z)(u,[["render",r],["__scopeId","data-v-c92d9db6"]]);var c=p},9137:function(e,t,a){a.d(t,{Z:function(){return u}});var l=a(3396),d=a(7139);const n=["value"];function i(e,t,a,i,o,r){return(0,l.wg)(),(0,l.iD)("select",(0,l.dG)({class:"ui-dropdown"},e.$attrs,{onChange:t[0]||(t[0]=e=>r.modelValueProxy=e.target.value)}),[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.options,(e=>((0,l.wg)(),(0,l.iD)("option",{value:e.value,key:e.name},(0,d.zw)(a.type)+": "+(0,d.zw)(e.name),9,n)))),128))],16)}var o={name:"UiDropdown",emits:["update:modelValue"],props:{options:{type:Array,required:!0,default:()=>[]},modelValue:String,type:String},computed:{modelValueProxy:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},r=a(89);const s=(0,r.Z)(o,[["render",i],["__scopeId","data-v-6a9f82b1"]]);var u=s},1330:function(e,t,a){a.d(t,{Z:function(){return m}});var l=a(3396);const d=["type","value"];function n(e,t,a,n,i,o){return(0,l.wg)(),(0,l.iD)("input",{class:"ui-input-date",type:a.type,ref:"input",value:a.modelValue,onInput:t[0]||(t[0]=e=>o.modelValueProxy=e.target.value)},null,40,d)}var i=a(6797),o=a.n(i),r=(a(1085),{name:"UiInputDate",props:{type:{type:String,default:"date"},modelValue:{type:String}},computed:{modelValueProxy:{get(){return this.modelValue?"date"===this.type?o()(this.modelValue).utc().format("YYYY-MM-DD"):"time"===this.type?o().utc(this.modelValue).utc().format("HH:mm"):"datetime-local"===this.type&&o().utc(this.modelValue).utc().format("YYYY-MM-DDTHH:mm"):""},set(e){this.$emit("update:modelValue",e)}}}}),s=a(89);const u=(0,s.Z)(r,[["render",n],["__scopeId","data-v-6d9c2b61"]]);var m=u},9631:function(e,t,a){a.d(t,{Z:function(){return m}});var l=a(3396),d=a(7139);const n={class:"ui-label"},i={key:0};function o(e,t,a,o,r,s){return(0,l.wg)(),(0,l.iD)("div",n,[a.label?((0,l.wg)(),(0,l.iD)("label",i,(0,d.zw)(a.label),1)):(0,l.kq)("",!0),(0,l.WI)(e.$slots,"default",{},void 0,!0)])}var r={name:"UiLabel",props:{label:{type:String,require:!1}}},s=a(89);const u=(0,s.Z)(r,[["render",o],["__scopeId","data-v-5c8591b8"]]);var m=u},8543:function(e,t,a){a.r(t),a.d(t,{default:function(){return N}});var l=a(3396);const d={class:"create-page"};function n(e,t,a,n,i,o){const r=(0,l.up)("CreateView");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(r)])}const i=e=>((0,l.dD)("data-v-4788e0fc"),e=e(),(0,l.Cn)(),e),o={class:"create-view mdl-shadow--4dp"},r=i((()=>(0,l._)("h3",null,"Создание встречи",-1))),s={class:"uploader"},u={class:"forms"},m={class:"agenda"},p=i((()=>(0,l._)("h3",null,"Программа",-1))),c={class:"add-button"},g=(0,l.Uk)(" + Добавить пункт программы "),v={class:"creation-buttons"},h=(0,l.Uk)(" Создать "),f=(0,l.Uk)(" Отменить ");function b(e,t,a,d,n,i){const b=(0,l.up)("UiImageUploader"),I=(0,l.up)("CreateForm"),_=(0,l.up)("CreateAgendaItemForm"),w=(0,l.up)("UiButton");return(0,l.wg)(),(0,l.iD)("div",o,[r,(0,l._)("div",s,[(0,l.Wm)(b,{class:"uploader",loading:e.isLoading,onSelect:i.selectImage,onRemove:i.removeImage},null,8,["loading","onSelect","onRemove"])]),(0,l._)("div",u,[(0,l.Wm)(I,{class:"forms-item",loading:e.isLoading},null,8,["loading"])]),(0,l._)("div",m,[p,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.meetupForm.agenda,(t=>((0,l.wg)(),(0,l.j4)(_,{key:t.id,loading:e.isLoading,class:"agenda-item","agenda-id":t.id},null,8,["loading","agenda-id"])))),128)),(0,l._)("div",c,[(0,l.Wm)(w,{disabled:e.isLoading,variant:"default",onClick:e.addAgendaItem},{default:(0,l.w5)((()=>[g])),_:1},8,["disabled","onClick"])])]),(0,l._)("div",v,[(0,l.Wm)(w,{disabled:e.isLoading,variant:"bgWrong",onClick:i.createMeetup},{default:(0,l.w5)((()=>[h])),_:1},8,["disabled","onClick"]),(0,l.Wm)(w,{disabled:e.isLoading,variant:"bgMain",onClick:i.cancel},{default:(0,l.w5)((()=>[f])),_:1},8,["disabled","onClick"])])])}var I=a(1873);const _={class:"creation-form"};function w(e,t,a,d,n,i){const o=(0,l.up)("UiInput"),r=(0,l.up)("UiLabel"),s=(0,l.up)("UiInputDate");return(0,l.wg)(),(0,l.iD)("div",_,[(0,l.Wm)(r,{label:"Заголовок"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{name:"title","model-value":i.meetupForm.title,"onUpdate:modelValue":e.updateTitle},null,8,["model-value","onUpdate:modelValue"])])),_:1}),(0,l.Wm)(r,{label:"Дата мероприятия"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{"model-value":i.meetupForm.date,"onUpdate:modelValue":e.updateDate},null,8,["model-value","onUpdate:modelValue"])])),_:1}),(0,l.Wm)(r,{label:"Место проведения"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{name:"place","model-value":i.meetupForm.place,"onUpdate:modelValue":e.updatePlace},null,8,["model-value","onUpdate:modelValue"])])),_:1}),(0,l.Wm)(r,{label:"Описание"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{multiline:"",name:"description","model-value":i.meetupForm.description,"onUpdate:modelValue":e.updateDescription},null,8,["model-value","onUpdate:modelValue"])])),_:1})])}var U=a(1085),y=a(9631),A=a(1330),k=a(65),D={name:"CreateForm",components:{UiLabel:y.Z,UiInput:U.Z,UiInputDate:A.Z},props:{loading:{type:Boolean,default:!1}},computed:{meetupForm(){return this.$store.state.creating.meetupForm}},methods:{...(0,k.nv)(["updateTitle","updateDate","updatePlace","updateDescription"])}},V=a(89);const W=(0,V.Z)(D,[["render",w],["__scopeId","data-v-7529870a"]]);var C=W,$=a(9187);const Z={class:"agenda-item-form mdl-shadow--4dp"},F={class:"row-1"},L={class:"row-2"},S={class:"row-3"},M={key:0,class:"talk-group"},T={class:"row-4"},Y={class:"row-5"},j={key:1,class:"row-6"};function P(e,t,a,d,n,i){const o=(0,l.up)("UiDropdown"),r=(0,l.up)("UiIcon"),s=(0,l.up)("UiInputDate"),u=(0,l.up)("ErrorMessage"),m=(0,l.up)("UiLabel"),p=(0,l.up)("UiInput");return(0,l.wg)(),(0,l.iD)("div",Z,[(0,l._)("div",F,[(0,l.Wm)(o,{options:e.options,type:"Тип",disabled:a.loading,"model-value":i.currentAgendaItem.type,"onUpdate:modelValue":t[0]||(t[0]=t=>e.updateAgendaType([t,a.agendaId]))},null,8,["options","disabled","model-value"]),(0,l.Wm)(r,{onClick:t[1]||(t[1]=t=>e.removeAgendaItem(a.agendaId)),class:"trash","icon-name":"trash"})]),(0,l._)("div",L,[(0,l.Wm)(m,{class:"startsAt",label:"Начало"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{type:"time",disabled:a.loading,"model-value":i.currentAgendaItem.startsAt,"onUpdate:modelValue":t[2]||(t[2]=t=>e.updateAgendaStartsAt([t,a.agendaId]))},null,8,["disabled","model-value"]),(0,l.Wm)(u,{name:"start"})])),_:1}),(0,l.Wm)(m,{class:"endsAt",label:"Окончание"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{type:"time",disabled:a.loading,"model-value":i.currentAgendaItem.endsAt,"onUpdate:modelValue":t[3]||(t[3]=t=>e.updateAgendaEndsAt([t,a.agendaId]))},null,8,["disabled","model-value"])])),_:1})]),(0,l._)("div",S,[(0,l.Wm)(m,{label:i.labelType},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"title",disabled:a.loading,"model-value":i.currentAgendaItem.title,"onUpdate:modelValue":t[4]||(t[4]=t=>e.updateAgendaTitle([t,a.agendaId]))},null,8,["disabled","model-value"])])),_:1},8,["label"])]),"talk"===i.currentAgendaItem.type?((0,l.wg)(),(0,l.iD)("div",M,[(0,l._)("div",T,[(0,l.Wm)(m,{label:"Докладчик"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"speaker",disabled:a.loading,"model-value":i.currentAgendaItem.speaker,"onUpdate:modelValue":t[5]||(t[5]=t=>e.updateAgendaSpeaker([t,a.agendaId]))},null,8,["disabled","model-value"])])),_:1})]),(0,l._)("div",Y,[(0,l.Wm)(o,{options:e.langOptions,type:"Язык",disabled:a.loading,"model-value":i.currentAgendaItem.language,"onUpdate:modelValue":t[6]||(t[6]=t=>e.updateAgendaLanguage([t,a.agendaId]))},null,8,["options","disabled","model-value"])])])):(0,l.kq)("",!0),i.agendaType?((0,l.wg)(),(0,l.iD)("div",j,[(0,l.Wm)(m,{label:"Описание"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{name:"description",multiline:"",disabled:a.loading,"model-value":i.currentAgendaItem.description,"onUpdate:modelValue":t[7]||(t[7]=t=>e.updateAgendaDescription([t,a.agendaId]))},null,8,["disabled","model-value"])])),_:1})])):(0,l.kq)("",!0)])}var q=a(5367),x=a(2395),z=a(9137),H={name:"CreateAgendaItemForm",components:{UiDropdown:z.Z,UiIcon:q.Z,UiInputDate:A.Z,UiLabel:y.Z,UiInput:U.Z},inheritAttrs:!1,props:{agendaId:{type:String,required:!0,validator:e=>""!==e},loading:{type:Boolean,default:!1}},data:()=>({options:x.LZ,langOptions:x.Qv}),methods:{...(0,k.nv)(["updateAgendaType","updateAgendaStartsAt","updateAgendaEndsAt","updateAgendaTitle","updateAgendaSpeaker","updateAgendaLanguage","updateAgendaDescription","removeAgendaItem"])},computed:{agenda(){return this.$store.state.creating.meetupForm.agenda},currentAgendaItem(){let e=null;return this.agenda.forEach((t=>{this.agendaId===t.id&&(e=t)})),e},labelType(){return"talk"===this.currentAgendaItem.type||"other"===this.currentAgendaItem.type?"Тема":"Нестандартный текст (необязательно)"},agendaType(){return"talk"===this.currentAgendaItem.type||"other"===this.currentAgendaItem.type}}};const B=(0,V.Z)(H,[["render",P],["__scopeId","data-v-3db87717"]]);var E=B,R=a(7491),O={name:"CreateView",components:{CreateAgendaItemForm:E,UiImageUploader:I.Z,UiButton:$.Z,CreateForm:C},data:()=>({file:null,isLoading:!1}),computed:{meetupForm(){return this.$store.state.creating.meetupForm}},methods:{...(0,k.nv)(["addAgendaItem","uploadImage","resetMeetupForm"]),selectImage(e){this.file=e},async uploadImg(){try{const e=await(0,R.Gq)("/covers/",this.file),t=e.metadata.fullPath,a=await(0,R.ii)(t);this.uploadImage({url:a,file:this.file})}catch(e){this.$toast.error("Ошибка"+e)}},removeImage(){this.file=null},cancel(){this.file=null,this.$router.push({name:"meetups"}),this.$toast.error("Создание митапа отменено"),this.resetMeetupForm()},async createMeetup(){this.isLoading=!0,this.file&&await this.uploadImg(),await this.$store.dispatch("createMeetup"),await this.$router.push({name:"meetup",params:{meetupId:this.meetupForm.id}}),this.resetMeetupForm(),await this.$toast.success("Митап создан!"),this.isLoading=!1}},beforeUnmount(){this.file=null}};const G=(0,V.Z)(O,[["render",b],["__scopeId","data-v-4788e0fc"]]);var K=G,Q={name:"CreatePage",components:{CreateView:K},computed:{isUserAuthorized(){return this.$store.state.user.data.isUserAuthorized}},methods:{guard(){this.isUserAuthorized||this.$router.replace({name:"meetups"})}},created(){this.guard()}};const J=(0,V.Z)(Q,[["render",n],["__scopeId","data-v-cc9a7ff0"]]);var N=J}}]);
//# sourceMappingURL=632.4ce3a76e.js.map