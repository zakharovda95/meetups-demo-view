"use strict";(self["webpackChunkvuejs_option_api_20220404_pet_project_meetups_spa"]=self["webpackChunkvuejs_option_api_20220404_pet_project_meetups_spa"]||[]).push([[969],{3054:function(e,t,n){n.d(t,{YT:function(){return u},fs:function(){return s},mD:function(){return o}});var a=n(7699),r=n(4944);function o(e,t){return(0,a.Xb)(r.bU,e,t).then((e=>e.user)).catch((e=>e.code+e.message))}function u(e,t){return(0,a.e5)(r.bU,e,t).then((e=>e.user)).catch((e=>e.code))}async function s(){await(0,a.w7)(r.bU)}},3982:function(e,t,n){function a(e){if(!e)return"Обязательное поле";const t=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;return!!t.test(e)||"Не забывайте про @"}function r(e){return!!e||"Обязательное поле"}function o(e){return e?!(e.length<6)||"Минимум 6 символов":"Обязательное поле"}function u(e,t){return e?e===t||"Пароли не совпадают":"Обязательное поле"}n.d(t,{_D:function(){return r},oH:function(){return a},u_:function(){return u},uo:function(){return o}})},3886:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(3396),r=n(7139);const o={class:"ui-label"},u={key:0};function s(e,t,n,s,i,l){return(0,a.wg)(),(0,a.iD)("div",o,[n.label?((0,a.wg)(),(0,a.iD)("label",u,(0,r.zw)(n.label),1)):(0,a.kq)("",!0),(0,a.WI)(e.$slots,"default",{},void 0,!0)])}var i={name:"UiLabel",props:{label:{type:String,require:!1}}},l=n(89);const c=(0,l.Z)(i,[["render",s],["__scopeId","data-v-43692e97"]]);var d=c},5185:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var a=n(3396);const r={class:"login-page"};function o(e,t,n,o,u,s){const i=(0,a.up)("LoginForm");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(i)])}const u=e=>((0,a.dD)("data-v-706b86c6"),e=e(),(0,a.Cn)(),e),s={class:"login-form mdl-shadow--2dp"},i=u((()=>(0,a._)("h3",null,"Войдите",-1))),l=(0,a.Uk)(" Войти "),c=(0,a.Uk)(" Нет аккаунта? "),d=(0,a.Uk)(" Зарегистрируйтесь ");function m(e,t,n,r,o,u){const m=(0,a.up)("UiInput"),p=(0,a.up)("ErrorMessage"),f=(0,a.up)("UiLabel"),_=(0,a.up)("UiButton"),w=(0,a.up)("UiLink"),g=(0,a.up)("Form");return(0,a.wg)(),(0,a.iD)("div",s,[i,(0,a.Wm)(g,{onSubmit:u.login},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"login-field",label:"Email"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"email",rules:u.validateEmail,type:"email",modelValue:e.userData.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.userData.email=t)},null,8,["rules","modelValue"]),(0,a.Wm)(p,{name:"email",class:"error"})])),_:1}),(0,a.Wm)(f,{label:"Пароль"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"password",rules:u.validatePassword,type:"password",modelValue:e.userData.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.userData.password=t)},null,8,["rules","modelValue"]),(0,a.Wm)(p,{name:"password",class:"error"})])),_:1}),(0,a.Wm)(_,{class:"login-button",type:"submit",variant:"bgMain"},{default:(0,a.w5)((()=>[l])),_:1}),(0,a._)("p",null,[c,(0,a.Wm)(w,{class:"registration-link",to:{name:"registration"}},{default:(0,a.w5)((()=>[d])),_:1})])])),_:1},8,["onSubmit"])])}var p=n(3886),f=n(1607),_=n(4202),w=n(3067),g=n(3054),h=n(5708),b=n(3982),v=n(2070),U={name:"LoginForm",components:{UiButton:w.Z,UiInput:f.Z,UiLink:_.Z,UiLabel:p.Z,Form:h.l0,ErrorMessage:h.Bc},mounted(){this.$toast.show("Вы можете зайти под демо пользователем")},data:()=>({userData:{email:"",password:""}}),methods:{validateEmail(e){return(0,b.oH)(e)},validatePassword(e){return(0,b.uo)(e)},async login(){const e=await(0,g.YT)(this.userData.email,this.userData.password);"auth/user-not-found"===e&&this.$toast.error("Неверный логин/пароль"),"auth/wrong-password"===e?this.$toast.error("Неверный пароль"):((0,v.qy)("user_token",e.uid),await this.$store.dispatch("isUserAuthorized"),await this.$router.push({name:"meetups"}))}}},D=n(89);const k=(0,D.Z)(U,[["render",m],["__scopeId","data-v-706b86c6"]]);var W=k,Z={name:"LoginPage",components:{LoginForm:W}};const L=(0,D.Z)(Z,[["render",o],["__scopeId","data-v-1223c822"]]);var y=L}}]);
//# sourceMappingURL=969.c5f9afdd.js.map