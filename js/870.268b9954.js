"use strict";(self["webpackChunkvuejs_option_api_20220404_pet_project_meetups_spa"]=self["webpackChunkvuejs_option_api_20220404_pet_project_meetups_spa"]||[]).push([[870],{2773:function(t,e,a){a.d(e,{U:function(){return n}});const n="https://firebasestorage.googleapis.com/v0/b/meetups-ddc9b.appspot.com/o/covers%2Fmeetups_card__background.jpg?alt=media&token=744441d9-c81e-4332-82a5-f41e5cc96b58"},4730:function(t,e,a){a.d(e,{Z:function(){return f}});var n=a(3396),i=a(7139);const o={class:"meetup-cover mdl-shadow--2dp"},s={class:"title"};function r(t,e,a,r,u,d){return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("h1",s,(0,i.zw)(a.title),1)])}var u=a(2773),d=a(9242);const c={name:"MeetupCover",props:{title:{type:String,required:!1,default:"title"},image:{type:String,required:!1}},computed:{bgImage(){return this.image?`linear-gradient( 0deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${this.image})`:`linear-gradient( 0deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${u.U})`}}},p=()=>{(0,d.sj)((t=>({"3e29a762":t.bgImage})))},l=c.setup;c.setup=l?(t,e)=>(p(),l(t,e)):p;var m=c,g=a(89);const v=(0,g.Z)(m,[["render",r],["__scopeId","data-v-cb575f54"]]);var f=v},2258:function(t,e,a){a.d(e,{Z:function(){return w}});var n=a(3396),i=a(7139);const o={key:1,class:"meetup-info"},s={class:"mdl-card__supporting-text"},r={class:"text"},u={class:"mdl-card__supporting-text"},d={class:"text"},c={class:"mdl-card__supporting-text time"},p={class:"text"};function l(t,e,a,l,m,g){const v=(0,n.up)("UiLoading"),f=(0,n.up)("UiIcon");return g.loading?((0,n.wg)(),(0,n.j4)(v,{key:0})):((0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",s,[(0,n.Wm)(f,{class:"card","icon-name":"organizer"}),(0,n._)("div",r,(0,i.zw)(a.meetup.organizer.name),1)]),(0,n._)("div",u,[(0,n.Wm)(f,{class:"card","icon-name":"location"}),(0,n._)("div",d,(0,i.zw)(a.meetup.place),1)]),(0,n._)("div",c,[(0,n.Wm)(f,{class:"card","icon-name":"calendar"}),(0,n._)("div",p,(0,i.zw)(a.meetup.date)+" ("+(0,i.zw)(g.daysBeforeTheEvent)+")",1)])]))}var m=a(5367),g=a(7198),v=a(6797),f=a.n(v),_={name:"MeetupInfo",components:{UiIcon:m.Z,UiLoading:g.Z},props:{meetup:{type:Object,default:()=>{}}},computed:{loading(){return this.$store.state.meetups.isLoading},daysBeforeTheEvent(){const t=f()().valueOf(),e=this.meetup.dateUnix;return e>t?`Через ${f()(e-t).format("DDD")} дн`:f()(e).day()===f()(t).day()?"Мероприятие состоится сегодня":e<t?"Мероприятие прошло":""}}},h=a(89);const M=(0,h.Z)(_,[["render",l],["__scopeId","data-v-71cfb14a"]]);var w=M},9187:function(t,e,a){a.d(e,{Z:function(){return d}});var n=a(3396),i=a(7139);function o(t,e,a,o,s,r){return(0,n.wg)(),(0,n.j4)((0,n.LL)(a.tag),{class:(0,i.C_)(["ui-button",r.btnVariant]),type:r.btnType},{default:(0,n.w5)((()=>[(0,n.WI)(t.$slots,"default",{},void 0,!0)])),_:3},8,["class","type"])}var s={name:"UiButton",props:{tag:{type:[String,Object],default:"button"},variant:{type:String,default:"blue"}},computed:{btnVariant(){return{default:"default"===this.variant,"bg-main":"bgMain"===this.variant,"bg-red":"bgWrong"===this.variant,"round-btn":"roundBtn"===this.variant}},btnType(){return"button"===this.tag&&"button"}}},r=a(89);const u=(0,r.Z)(s,[["render",o],["__scopeId","data-v-473b44ba"]]);var d=u},7198:function(t,e,a){a.d(e,{Z:function(){return l}});var n=a(3396);const i=t=>((0,n.dD)("data-v-2d5dbf16"),t=t(),(0,n.Cn)(),t),o={class:"ui-loading"},s=i((()=>(0,n._)("h4",null,"ИДЕТ ЗАГРУЗКА...",-1))),r=[s];function u(t,e,a,i,s,u){return(0,n.wg)(),(0,n.iD)("div",o,r)}var d={name:"UiLoading"},c=a(89);const p=(0,c.Z)(d,[["render",u],["__scopeId","data-v-2d5dbf16"]]);var l=p},1257:function(t,e,a){a.d(e,{Z:function(){return m}});var n=a(3396),i=a(9242);const o={class:"layout"},s={class:"close"},r=(0,n.Uk)("Закрыть");function u(t,e,a,u,d,c){const p=(0,n.up)("UiButton");return(0,n.wg)(),(0,n.iD)("div",{class:"ui-modal mdl-shadow--8dp",onClick:e[1]||(e[1]=(...t)=>c.close&&c.close(...t))},[(0,n._)("div",o,[(0,n._)("div",{class:"content",onClick:e[0]||(e[0]=(0,i.iM)((()=>{}),["stop"]))},[(0,n._)("div",s,[(0,n.Wm)(p,{variant:"default",onClick:c.close},{default:(0,n.w5)((()=>[r])),_:1},8,["onClick"])]),(0,n.WI)(t.$slots,"default",{},void 0,!0)])])])}var d=a(9187),c={name:"UiModal",components:{UiButton:d.Z},emits:["update:closeModal"],methods:{close(){this.$emit("update:closeModal")}},beforeUnmount(){document.body.style.overflow="auto"}},p=a(89);const l=(0,p.Z)(c,[["render",u],["__scopeId","data-v-047fc08b"]]);var m=l},9870:function(t,e,a){a.r(e),a.d(e,{default:function(){return et}});var n=a(3396);const i={class:"meetup-page"},o={class:"content"};function s(t,e,a,s,r,u){const d=(0,n.up)("MeetupToggle"),c=(0,n.up)("MeetupView");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(d,{id:"toggle"}),(0,n._)("div",o,[(0,n.Wm)(c)])])}const r={key:1,class:"meetup-view mdl-shadow--2dp"},u={class:"cover"},d={class:"buttons"},c={class:"content"};function p(t,e,a,i,o,s){const p=(0,n.up)("UiLoading"),l=(0,n.up)("MeetupCover"),m=(0,n.up)("MeetupInfo"),g=(0,n.up)("MeetupButtonGroup"),v=(0,n.up)("router-view");return s.meetup?((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",u,[(0,n.Wm)(l,{image:s.meetup.image,title:s.meetup.title},null,8,["image","title"])]),(0,n._)("div",d,[(0,n.Wm)(m,{meetup:s.meetup},null,8,["meetup"]),(0,n.Wm)(g,{meetup:s.meetup},null,8,["meetup"])]),(0,n._)("div",c,[(0,n.Wm)(v)])])):((0,n.wg)(),(0,n.j4)(p,{key:0}))}var l=a(7198),m=a(4730),g=a(2258);const v={key:0,class:"meetup-button-group"},f={key:0,class:"organizer"},_=(0,n.Uk)("Редактировать"),h=(0,n.Uk)("Удалить"),M={key:1,class:"participant"},w=(0,n.Uk)(" Участвовать "),b=(0,n.Uk)(" Отменить "),k=(0,n.Uk)(" Вы уверены? Отменить действие невозможно! ");function U(t,e,a,i,o,s){const r=(0,n.up)("UiButton"),u=(0,n.up)("UiModalConfirmation");return s.isAuthorized?((0,n.wg)(),(0,n.iD)("div",v,[s.isOrganizer?((0,n.wg)(),(0,n.iD)("div",f,[(0,n.Wm)(r,{variant:"bgMain",onClick:s.editMeetup},{default:(0,n.w5)((()=>[_])),_:1},8,["onClick"]),(0,n.Wm)(r,{variant:"bgWrong",onClick:e[0]||(e[0]=e=>t.isModalOpen=!0)},{default:(0,n.w5)((()=>[h])),_:1})])):(0,n.kq)("",!0),s.isOrganizer?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",M,[s.isParticipant?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(r,{key:0,variant:"bgMain",onClick:s.participate},{default:(0,n.w5)((()=>[w])),_:1},8,["onClick"])),s.isParticipant?((0,n.wg)(),(0,n.j4)(r,{key:1,variant:"bgWrong",onClick:s.cancelParticipation},{default:(0,n.w5)((()=>[b])),_:1},8,["onClick"])):(0,n.kq)("",!0)])),((0,n.wg)(),(0,n.j4)(n.lR,{to:"#aboard"},[t.isModalOpen?((0,n.wg)(),(0,n.j4)(u,{key:0,"onUpdate:closeModal":e[1]||(e[1]=e=>t.isModalOpen=!1),"onUpdate:confirmation":s.checkConfirmation},{default:(0,n.w5)((()=>[k])),_:1},8,["onUpdate:confirmation"])):(0,n.kq)("",!0)]))])):(0,n.kq)("",!0)}var y=a(9187),I=a(7491),C=a(7541),Z=a(65);const W={class:"ui-modal-confirmation"},D={class:"text"},$={class:"buttons"},j=(0,n.Uk)(" ДА "),z=(0,n.Uk)(" НЕТ ");function B(t,e,a,i,o,s){const r=(0,n.up)("UiButton"),u=(0,n.up)("UiModal");return(0,n.wg)(),(0,n.j4)(u,{"onUpdate:closeModal":e[2]||(e[2]=e=>t.$emit("update:closeModal"))},{default:(0,n.w5)((()=>[(0,n._)("div",W,[(0,n._)("h4",D,[(0,n.WI)(t.$slots,"default",{},void 0,!0)]),(0,n._)("div",$,[(0,n.Wm)(r,{class:"agree",onClick:e[0]||(e[0]=e=>t.$emit("update:confirmation",!0)),variant:"bgMain"},{default:(0,n.w5)((()=>[j])),_:1}),(0,n.Wm)(r,{class:"disagree",onClick:e[1]||(e[1]=e=>t.$emit("update:confirmation",!1)),variant:"bgWrong"},{default:(0,n.w5)((()=>[z])),_:1})])])])),_:3})}var O=a(1257),L={name:"UiModalConfirmation",components:{UiModal:O.Z,UiButton:y.Z},emits:["update:confirmation","update:closeModal"],data:()=>({})},P=a(89);const T=(0,P.Z)(L,[["render",B],["__scopeId","data-v-a7e3f146"]]);var q=T,x={name:"MeetupButtonGroup",components:{UiModalConfirmation:q,UiButton:y.Z},props:{meetup:{type:Object,default:()=>({})}},data:()=>({isLoading:!1,isModalOpen:!1,isConfirm:!1}),computed:{userMeetups(){return this.$store.state.user.data.userInfo?.meetups},isAuthorized(){return!!this.$store.state.user.data.userInfo},isParticipant(){return!!this.userMeetups&&this.userMeetups.participant.some((t=>t===this.meetup.id))},isOrganizer(){return!!this.userMeetups&&this.userMeetups.organizer.some((t=>t===this.meetup.id))}},methods:{...(0,Z.nv)(["getMeetups","pushMeetupForParticipationToUserData","cutMeetupFromParticipationMeetupsInUserData","cutMeetupFromOrganizedMeetupsInUserData"]),checkConfirmation(t){console.log(t),t?this.removeMeetup():this.isModalOpen=!1},editMeetup(){this.$router.push({name:"edit",params:{meetupId:this.meetup.id}})},async removeMeetup(){this.isLoading=!0,await(0,I.JQ)("covers/"+this.meetup.imageName),await(0,C.es)("meetups/"+this.meetup.id),await this.cutMeetupFromOrganizedMeetupsInUserData(this.meetup.id),await this.$router.push({name:"meetups"}),await this.$toast.success("Митап удален!"),this.isLoading=!1},async participate(){await this.pushMeetupForParticipationToUserData(this.meetup.id)},async cancelParticipation(){await this.cutMeetupFromParticipationMeetupsInUserData(this.meetup.id)}}};const F=(0,P.Z)(x,[["render",U],["__scopeId","data-v-35fd255e"]]);var V=F,S={name:"MeetupView",components:{UiLoading:l.Z,MeetupCover:m.Z,MeetupInfo:g.Z,MeetupButtonGroup:V},mounted(){this.$store.dispatch("chooseMeetupById",this.meetupId)},computed:{meetupId(){return this.$route.params.meetupId},meetup(){return this.$store.getters.meetup}}};const G=(0,P.Z)(S,[["render",p],["__scopeId","data-v-51b2b38c"]]);var A=G;const E={class:"meetup-toggle mdl-shadow--2dp"},J=(0,n.Uk)(" Подробности "),N=(0,n.Uk)("Программа");function Q(t,e,a,i,o,s){const r=(0,n.up)("UiLink");return(0,n.wg)(),(0,n.iD)("div",E,[(0,n.Wm)(r,{variant:"nav-link",to:{name:"description"}},{default:(0,n.w5)((()=>[J])),_:1}),(0,n.Wm)(r,{variant:"nav-link",to:{name:"agenda"}},{default:(0,n.w5)((()=>[N])),_:1})])}var R=a(797),H={name:"MeetupToggle",components:{UiLink:R.Z}};const K=(0,P.Z)(H,[["render",Q],["__scopeId","data-v-d9c03710"]]);var X=K,Y={name:"MeetupPage",components:{MeetupToggle:X,MeetupView:A}};const tt=(0,P.Z)(Y,[["render",s],["__scopeId","data-v-604db718"]]);var et=tt}}]);
//# sourceMappingURL=870.268b9954.js.map